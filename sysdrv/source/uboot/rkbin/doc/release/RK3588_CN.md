# RK3588 Release Note

## rk3588_bl32_v1.16.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2024-04-16 | rk3588_bl32_v1.16.bin | 185dc3c92   | 重要     |

### New

1. 增加输入参数检查，增加安全性。
2. 支持打印 TEE 内存占用信息。
3. 硬件 crypto 支持4G以上地址。

------

## rk3588_ddr_lp4_2112MHz_lp5_2400MHz_v1.17.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2024-04-12 | rk3588_ddr_lp4_2112MHz_lp5_2400MHz_v1.17.bin | 3488111f83  | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                                                     | 问题现象                                     | 问题来源 |
| ----- | -------- | ------------------------------------------------------------ | -------------------------------------------- | -------- |
| 1     | 重要     | 修正当boot_fsp配为非0值后pll_id设置错误问题，boot_fsp默认值为0。 | 当boot_fsp配为非0值后概率性出现DDR初始化失败 | -        |

------

## rk3588_ddr_lp4_2112MHz_lp5_2400MHz_v1.16.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2024-02-04 | rk3588_ddr_lp4_2112MHz_lp5_2400MHz_v1.16.bin | 9fffbe1e78  | 重要     |

### New

1. 修改LPDDR5频率，提高稳定性。
2. 新增支持cs0 row小于cs1 row的颗粒。
3. 修改 DERATEINT.mr4_read_interval配置。

### Fixed

| Index | 重要程度 | 更新说明                           | 问题现象                                        | 问题来源 |
| ----- | -------- | ---------------------------------- | ----------------------------------------------- | -------- |
| 1     | 重要     | 修正单片选LPDDR5的derate异常问题。 | 单片选LPDDR5执行DDR变频后可能会引起kernel挂起。 | -        |

------

## rk3588_bl31_v1.45.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-12-27 | rk3588_bl31_v1.45.elf | 4ca8a8422   | 重要     |

### New

1. 优化唤醒后ddr变频时间。
2. 唤醒后提前提高cpu频率。
3. 支持pvtpll参数通过sip配置。

------

## rk3588_pcie_v2.10.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | --------------------- | ----------- | -------- |
| 2023-12-18 | rk3588_pcie_v2.10.bin | 35f57cde3   | 普通     |

### New

1. Update the version。

------

## rk3588_pcie_v2.00.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | --------------------- | ----------- | -------- |
| 2023-12-06 | rk3588_pcie_v2.00.bin | I3e280b78   | 普通     |

### New

1. Fix bar capacity。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.15.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-11-23 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.15.bin | d5483af87d  | 重要     |

### New

1. 避免PHY skew value大于dll lock value，提高528MHz稳定性。
2. 修复data training流程，提高稳定性。
3. LPDDR5唤醒流程，恢复ZQ background calibration。

------

## rk3588_usbplug_v1.11.bin

| 时间       | 文件                     | 编译 commit | 重要程度 |
| ---------- | :----------------------- | ----------- | -------- |
| 2023-11-20 | rk3588_usbplug_v1.11.bin | dcac518e7   | 重要     |

### New

1. 增加rk3583烧写支持。

------

## rk3583_ddr_lp4_1848MHz_lp5_2112MHz_v1.14.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-11-10 | rk3583_ddr_lp4_1848MHz_lp5_2112MHz_v1.14.bin | 73dffea49e  | 重要     |

### New

1. 增加RK3583支持。

------

## rk3588_bl31_v1.44.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-11-07 | rk3588_bl31_v1.44.elf | 4acbe711b   | 重要     |

### New

1. 增加rk3583 pvtpll 配置。
2. 支持读取安全的otp。
3. 优化dmc恢复时间。

------

## rk3588_pcie_v1.00.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | --------------------- | ----------- | -------- |
| 2023-10-07 | rk3588_pcie_v1.00.bin | I01c2c7d7   | 普通     |

### New

1. 添加支持 pcie ep 初始化的裸系统可执行固件。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.14.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-09-26 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.14.bin | 73dffea49e  | 重要     |

### New

1. 提高LPDDR5 稳定性。
2. 增加fwver支持。

------

## rk3588_bl32_v1.15.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-09-25 | rk3588_bl32_v1.15.bin | 62aa10b7    | 重要     |

### New

1. 支持打印固件版本号fwver，支持传参fwver给后级固件。

------

## rk3588_bl31_v1.43.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-09-26 | rk3588_bl31_v1.43.elf | 24b7dd41a   | 重要     |

### New

1. 支持通过rk_atags传递bl31版本号。
2. 支持通过dts配置假关机的唤醒源。

------

## rk3588_spl_v1.13.bin

| 时间       | 文件                 | 编译 commit | 重要程度 |
| ---------- | :------------------- | ----------- | -------- |
| 2023-09-25 | rk3588_spl_v1.13.bin | e4e124926e  | 重要     |

### New

1. 打印并传递固件版本号。

### Fixed

| Index | 重要程度 | 更新说明                                            | 问题现象                                                 | 问题来源 |
| ----- | -------- | --------------------------------------------------- | -------------------------------------------------------- | -------- |
| 1     | 重要     | 解决SPL加载校验u-boot.dtb失败后不加载备份镜像的问题 | 第一份uboot.img的u-boot.dtb损坏后，SPL没有加载备份镜像。 | -        |
------

## rk3588_bl31_v1.42.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-09-09 | rk3588_bl31_v1.42.elf | 87bcc5dfe   | 重要     |

### New

1. 优化唤醒时间。
2. 支持任意cpu进行休眠唤醒。
3. 假关机时支持所有pwm唤醒。

------

## rk3588_bl32_v1.14.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-08-28 | rk3588_bl32_v1.14.bin | b5340fd65   | 重要     |

### New

1. 默认设置伪随机数种子。
2. 内部TA支持读写security flag接口。
3. 内部TA支持判断  ta encryption key 是否写入。

### Fixed

| Index | 重要程度 | 更新说明                                   | 问题现象             | 问题来源 |
| ----- | -------- | ------------------------------------------ | -------------------- | -------- |
| 1     | 重要     | 修正使能动态内存后硬件crypto概率性奔溃问题 | 使用硬件crypto会报错 | -        |

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.13.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-08-11 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.13.bin | 25cee80c4f  | 重要     |

### Warn

1. 要求BL31版本必须同步更新到V1.41或更高版本。

### New

1. 提高LPDDR5 528MHz稳定性。
2. fsp_params中4个通道更新各自的vref_inner，提高稳定性。

### Fixed

| Index | 重要程度 | 更新说明                     | 问题现象                       | 问题来源 |
| ----- | -------- | ---------------------------- | ------------------------------ | -------- |
| 1     | 重要     | 解决高温环境下启动失败的问题 | 高温环境下，开机ddrbin中卡死。 | -        |

------

## rk3588_bl31_v1.41.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-08-10 | rk3588_bl31_v1.41.elf | b7c5102a2   | 重要     |

### New

1. 支持L3分区功能。
2. 更新DDR vref_inner配置。
3. 支持MCU休眠参数dts可配。

------

## rk3588_bl31_v1.40.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-07-13 | rk3588_bl31_v1.40.elf | dc1125f48   | 重要     |

### New

1. 支持根据vop子pd的状态，复位VOP。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.12.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-07-06 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.12.bin | 52218f4949  | 重要     |

### New

1. 增加支持打印training结果和颗粒MR值。

### Fixed

| Index | 重要程度 | 更新说明                                   | 问题现象                                                     | 问题来源 |
| ----- | -------- | ------------------------------------------ | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 解决最大频率在1066和1600之间启动失败的问题 | 最高频率设置在1066-1600之间时，开机ddrbin中卡死。            | -        |
| 2     | 重要     | 解决多次初始化DDR引起的死机问题            | 第一份固件SPL加载失败时重新加载第二份固件导致DDR被重复初始化，卡死在ddrbin中。 | -        |

------

## rk3588_bl31_v1.39.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-06-27 | rk3588_bl31_v1.39.elf | 001b4889e   | 重要     |

### New

1. 修改非安全空间otp大小到128字节。
2. 支持根据otp信息调整pvtpll配置。
3. 调整rk3588j/m的pvtpll配置。

------

## rk3588_bl31_v1.38.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-05-09 | rk3588_bl31_v1.38.elf | 3389cfdda   | 重要     |

### Warn

1. 要求DDR bin版本必须同步更新到V1.11或更高版本。

### New

1. 更新ddr lp5 mr配置。
2. 提高hdmirx相关功能稳定性。
3. 添加ddr展频模式。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.11.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2023-05-09 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.11.bin | f1474cf52f  | 重要     |

### Warn

1. 要求BL31版本必须同步更新到V1.38或更高版本。

### New

1. 增加打印，在初始化失败时可以更好的定位焊接问题。
2. 优化开机时间。
3. 使能per bank refresh功能。
4. LPDDR5 4个通道使用不同的write vref。
5. 先初始化LPDDR4X。
6. LPDDR5 cavref更新为36%。
7. 增加支持展频功能。

------

## rk3588_bl32_v1.13.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-04-19 | rk3588_bl32_v1.13.bin | 7f1ea6d6e   | 重要     |

### New

1. OTP 支持 burst 读取，加快 BL32 启动速度。
2. 支持内核端读取安全启动标志和公钥哈希。
3. 支持动态共享内存，安全非安全世界可以传递更大数据。
4. BL32 打印支持 pstore，内核可以通过 pstore 节点查看 BL32 的打印信息。

------

## rk3588_bl31_v1.37.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-03-08 | rk3588_bl31_v1.37.elf | 9609b9c19   | 重要     |

### New

1. 休眠唤醒时保存恢复 u2phy_grf寄存器。
2. 休眠唤醒时保存更多ddr相关寄存器。
3. 兼容QNX系统的休眠唤醒。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.10.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2022-11-21 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.10.bin | 75d050770f  | 重要     |

### New

1. 可通过ddrbin_tool开关pageclose。

### Fixed

| Index | 重要程度 | 更新说明                | 问题现象                                                     | 问题来源 |
| ----- | -------- | ----------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 解决DDR总容量24GB问题。 | 当板上DDR总容量为24GB时，无法正常开机。                      | -        |
| 2     | 重要     | 解决LP4/LP4X稳定性问题  | 个别板子read odt需要从60ohm改为40ohm才能更稳定，BL31必须更新到V1.37及以上。 | -        |
| 3     | 重要     | 优化LPDDR5性能          | LPDDR5模式下tWTR计算错误导致效率较差                         | -        |

------

## rk3588_bl31_v1.36.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-01-30 | rk3588_bl31_v1.36.elf | 78ee25fe7   | 重要     |

### New

1. 支持休眠时软件解析多种协议的红外信号，需配合mcu一起使用。

------

## rk3588_bl31_v1.35.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-01-16 | rk3588_bl31_v1.35.elf | bd7bac37a   | 重要     |

### New

1. 提高hdmirx相关功能稳定性。

------

## rk3588_bl31_v1.34.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2023-01-10 | rk3588_bl31_v1.34.elf | e63a16361   | 重要     |

### New

1. hptimer支持使用软件校准模式。
2. pvtpll支持添加长度。

### Fixed

| Index | 重要程度 | 更新说明                        | 问题现象                                                     | 问题来源 |
| ----- | -------- | ------------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 修正休眠时pmu mcu被意外启动问题 | 休眠唤醒后kernel代码或数据会被覆盖，原因是pmu mcu被意外启动导致的 | -        |

------

## rk3588_spl_v1.12.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-12-26 | rk3588_spl_v1.12.bin  | 5f53abfa    | 重要     |

### New

1. 支持 SPL AB。

------

## rk3588_bl31_v1.33.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-12-07 | rk3588_bl31_v1.33.elf | 17b41886e   | 重要     |

### New

1. 支持rk3588m, rk3588j。

------

## rk3588_usbplug_v1.10.bin

| 时间       | 文件                     | 编译 commit | 重要程度 |
| ---------- | :----------------------- | ----------- | -------- |
| 2022-11-22 | rk3588_usbplug_v1.10.bin | b0e3c43c2   | 重要     |

### New

1. 提升兼容性。

------

## rk3588_bl31_v1.32.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-11-21 | rk3588_bl31_v1.32.elf | e529a2760   | 重要     |

### New

1. 支持bus auto CS功能。

------

## rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.09.bin

| 时间       | 文件                                         | 编译 commit | 重要程度 |
| ---------- | :------------------------------------------- | ----------- | -------- |
| 2022-11-21 | rk3588_ddr_lp4_2112MHz_lp5_2736MHz_v1.09.bin | a930779e06  | 重要     |

### New

1. 可通过ddrbin_tool开关derate/perbank refresh。
2. DDRBIN开启pstore功能。
3. boot 频率可通过ddrbin_tool修改。
4. 开启LPDDR5 DMC功能。
5. 支持LPDDR5 byte mode颗粒。
6. 增加回收与寄存器空间重叠的256MB DDR空间，默认回收，可通过ddrbin_tool关闭。

### Fixed

| Index | 重要程度 | 更新说明                | 问题现象                                                     | 问题来源 |
| ----- | -------- | ----------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 修正WRTRN概率性异常问题 | 修正533-1066M之间WR Training概率性异常问题。该频率点当前Bin未使用。但是客户可能通过ddrbin_tool修改使用到这段频率点。 | -        |
| 2     | 重要     | 修正周期性ZQCALIB间隙   | 修正周期性ZQCLIB timer 使用默认值，周期性ZQCALIB频繁问题。   | -        |
| 3     | 重要     | 修正528M稳定性问题      | 变频到528M之前清除SW*skew，避免528M带入其他频率点的skew引起稳定性问题 | -        |
| 4     | 重要     | 提高LPDDR5稳定性与性能  | 修正一些LPDDR5 timing配置，提高LPDDR5稳定性和性能。          | -        |
| 5     | 重要     | LP4/LP4X 32GB容量支持   | 增加LPDDR4两颗16GB组成的32GB的支持                           | -        |

------

## rk3588_bl31_v1.31.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-11-09 | rk3588_bl31_v1.31.elf | 91e396185   | 重要     |

### New

1. 使能RK_ENABLE_A76_L2_FLUSH_TO_L3功能。
2. 支持amp功能。

### Fixed

| Index | 重要程度 | 更新说明                               | 问题现象 | 问题来源 |
| ----- | -------- | -------------------------------------- | -------- | -------- |
| 1     | 重要     | 休眠、唤醒时保存、恢复保存性能相关配置 | -        | -        |

------

## rk3588_bl31_v1.30.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-10-12 | rk3588_bl31_v1.30.elf | 1450d21e8   | 重要     |

### New

1. 支持pstore功能。

------

## rk3588_bl31_v1.29.elf

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-09-29 | rk3588_bl31_v1.29.elf | 686b5c48b   | 重要     |

### New

1. 添加A55 AT speculative补丁。
2. 添加LPDDR5变频补丁，支持行间变频。
3. 支持根据具体的DDR通道情况配置FW-DSU region。

### Fixed

| Index | 重要程度 | 更新说明                   | 问题现象                                                     | 问题来源 |
| ----- | -------- | -------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 解决cec唤醒问题            | 休眠等待cec唤醒时，gpio1/3的中断会同时唤醒AP和mcu，导致异常。 | -        |
| 2     | 重要     | 修复ddr相关配置            | 解决一些ddr不稳定问题。                                      | -        |
| 3     | 重要     | 解决关闭串口后休眠异常问题 | loader关闭串口后，系统休眠会异常。                           | -        |

------

## rk3588_bl32_v1.12.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-09-20 | rk3588_bl32_v1.12.bin | 4542e1efd   | 重要     |

### New

1. 支持根据具体的DDR通道情况配置FW-DSU region。

------

## rk3588_bl32_v1.11.bin

| 时间       | 文件                  | 编译 commit | 重要程度 |
| ---------- | :-------------------- | ----------- | -------- |
| 2022-09-15 | rk3588_bl32_v1.11.bin | d84087907   | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                            | 问题现象                                                     | 问题来源 |
| ----- | -------- | ----------------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 解决关闭打印时OPTEE启动阶段卡住问题 | 当用户使用/rkbin/tools/ddrbin_tool工具关闭打印时，rk_atags将通知OPTEE关闭打印，OPTEE启动时关闭打印会出现卡死，无法进入U-Boot | -        |

------

